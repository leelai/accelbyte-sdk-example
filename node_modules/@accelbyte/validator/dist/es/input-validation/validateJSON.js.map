{"version":3,"sources":["../../../src/input-validation/validateJSON.ts"],"names":[],"mappings":";;;;AAUa,MAAA,qBAAA,GAAwB,CAAE,CAAA,IAAA,CAAK,CAAC,yBAAA,CAA0B,KAAK,KAAO,EAAA,yBAAA,CAA0B,IAAK,CAAA,aAAa,CAAC,EAAA;AAQnH,MAAA,YAAA,GAAe,CAAC,KAAA,EAAe,EAAE,UAAA,GAAa,MAAM,QAAW,GAAA,IAAA,EAA6B,GAAA,EAAO,KAAA;AAC9G,EAAI,IAAA,OAAA,CAAQ,KAAK,CAAG,EAAA;AAClB,IAAA,IAAI,CAAC,UAAY,EAAA;AACf,MAAO,OAAA,IAAA,CAAA;AAAA,KACT;AACA,IAAA,OAAO,sBAAsB,IAAK,CAAA,KAAA,CAAA;AAAA,GACpC;AAEA,EAAI,IAAA;AACF,IAAM,MAAA,UAAA,GAAa,IAAK,CAAA,KAAA,CAAM,KAAK,CAAA,CAAA;AACnC,IAAI,IAAA,QAAA,IAAY,OAAO,UAAA,KAAe,QAAU,EAAA;AAC9C,MAAA,OAAO,sBAAsB,IAAK,CAAA,aAAA,CAAA;AAAA,KACpC;AACA,IAAO,OAAA,IAAA,CAAA;AAAA,WACA,CAAG,EAAA;AACV,IAAA,OAAO,sBAAsB,IAAK,CAAA,aAAA,CAAA;AAAA,GACpC;AACF","file":"validateJSON.js","sourcesContent":["/*\n * Copyright (c) 2021-2023 AccelByte Inc. All Rights Reserved\n * This is licensed software from AccelByte Inc, for limitations\n * and restrictions contact your company contract manager.\n */\n\nimport isEmpty from 'validator/lib/isEmpty.js'\nimport { z } from 'zod'\nimport { CommonValidationErrorType } from './constant/errorType'\n\nexport const ValidateJSONErrorType = z.enum([CommonValidationErrorType.enum.empty, CommonValidationErrorType.enum.invalidFormat])\nexport type ValidateJSONErrorType = z.infer<typeof ValidateJSONErrorType>\n\nexport interface ValidateJSONOption {\n  isRequired?: boolean\n  isObject?: boolean\n}\n\nexport const validateJSON = (value: string, { isRequired = true, isObject = true }: ValidateJSONOption = {}) => {\n  if (isEmpty(value)) {\n    if (!isRequired) {\n      return null\n    }\n    return ValidateJSONErrorType.enum.empty\n  }\n\n  try {\n    const parsedJSON = JSON.parse(value)\n    if (isObject && typeof parsedJSON !== 'object') {\n      return ValidateJSONErrorType.enum.invalidFormat\n    }\n    return null\n  } catch (e) {\n    return ValidateJSONErrorType.enum.invalidFormat\n  }\n}\n"]}