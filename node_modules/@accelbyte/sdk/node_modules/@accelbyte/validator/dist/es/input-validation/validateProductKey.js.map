{"version":3,"sources":["../../../src/input-validation/validateProductKey.ts"],"names":[],"mappings":";;;;;;AAYa,MAAA,2BAAA,GAA8B,CAAE,CAAA,IAAA,CAAK,CAAC,GAAG,wBAAwB,OAAS,EAAA,yBAAA,CAA0B,IAAK,CAAA,aAAa,CAAC,EAAA;AAQpI,MAAM,UAAa,GAAA,GAAA,CAAA;AAEN,MAAA,kBAAA,GAAqB,CAAC,KAAA,EAAe,EAAE,UAAA,GAAa,MAAM,GAAM,GAAA,UAAA,EAA0C,GAAA,EAAO,KAAA;AAC5H,EAAA,MAAM,KAAQ,GAAA,4BAAA,CAAA;AACd,EAAI,IAAA,OAAA,CAAQ,KAAK,CAAG,EAAA;AAClB,IAAA,IAAI,CAAC,UAAY,EAAA;AACf,MAAO,OAAA,IAAA,CAAA;AAAA,KACT;AACA,IAAA,OAAO,4BAA4B,IAAK,CAAA,KAAA,CAAA;AAAA,GAC1C;AACA,EAAA,IAAI,CAAC,OAAQ,CAAA,KAAA,EAAO,KAAK,CAAK,IAAA,KAAA,CAAM,UAAU,GAAK,EAAA;AACjD,IAAA,OAAO,4BAA4B,IAAK,CAAA,aAAA,CAAA;AAAA,GAC1C;AACA,EAAA,OAAO,cAAe,CAAA,KAAA,EAAO,EAAE,GAAA,EAAK,CAAA,CAAA;AACtC","file":"validateProductKey.js","sourcesContent":["/*\n * Copyright (c) 2021-2023 AccelByte Inc. All Rights Reserved\n * This is licensed software from AccelByte Inc, for limitations\n * and restrictions contact your company contract manager.\n */\n\nimport isEmpty from 'validator/lib/isEmpty.js'\nimport matches from 'validator/lib/matches.js'\nimport { z } from 'zod'\nimport { CommonValidationErrorType } from './constant/errorType'\nimport { validateLength, ValidateLengthErrorType } from './validateLength'\n\nexport const ValidateProductKeyErrorType = z.enum([...ValidateLengthErrorType.options, CommonValidationErrorType.enum.invalidFormat])\nexport type ValidateProductKeyErrorType = z.infer<typeof ValidateProductKeyErrorType>\n\nexport interface ValidateProductKeyOptions {\n  isRequired?: boolean\n  max?: number\n}\n\nconst MAX_LENGTH = 120\n\nexport const validateProductKey = (value: string, { isRequired = true, max = MAX_LENGTH }: ValidateProductKeyOptions = {}) => {\n  const REGEX = '^([a-z0-9]+)(_?[a-z0-9])*$'\n  if (isEmpty(value)) {\n    if (!isRequired) {\n      return null\n    }\n    return ValidateProductKeyErrorType.enum.empty\n  }\n  if (!matches(value, REGEX) && value.length <= max) {\n    return ValidateProductKeyErrorType.enum.invalidFormat\n  }\n  return validateLength(value, { max })\n}\n"]}